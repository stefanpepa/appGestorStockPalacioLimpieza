"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cache_login_1 = require("./cache-login");
const afip_apis_1 = require("../afip-apis");
const DEFAULT_URLWSAAWSDL = "https://wsaahomo.afip.gov.ar/ws/services/LoginCms?WSDL";
const DEFAULT_CERTIFICATE = "./private/certificate/TEST/12.2023/certificate.crt";
const DEFAULT_CERTIFICATE_KEY = "./private/certificate/TEST/12.2023/private.key";
const cuitRepresentada = 30601506420;
const wsdl = afip_apis_1.RemHarinaService.testWSDL;
const cacheLogin = cache_login_1.CacheLogin.Instance;
cacheLogin.certificateKey = DEFAULT_CERTIFICATE_KEY;
cacheLogin.certificatePath = DEFAULT_CERTIFICATE;
cacheLogin.wsaawsdl = DEFAULT_URLWSAAWSDL;
cacheLogin.getTicket(afip_apis_1.RemHarinaService.serviceId)
    .then(ticket => {
    console.log("=== ticket ===");
    console.log(JSON.stringify(ticket));
    const authRequest = {
        token: ticket.credentials.token,
        sign: ticket.credentials.sign,
        cuitRepresentada
    };
    const remHarinaService = new afip_apis_1.RemHarinaService(wsdl);
    return remHarinaService.dummy()
        .then(r => {
        console.log(`===dummy===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarCodigosDomicilio({
            authRequest,
            cuitTitularDomicilio: cuitRepresentada
        });
    })
        .then(r => {
        console.log(`===consultarCodigosDomicilio===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarPuntosEmision({ authRequest });
    })
        .then(r => {
        console.log(`===consultarPuntosEmision===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarTiposComprobante({ authRequest });
    })
        .then(r => {
        console.log(`===consultarTiposComprobante===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarTiposEstado({ authRequest });
    })
        .then(r => {
        console.log(`===consultarTiposEstado===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarTiposContingencia({ authRequest });
    })
        .then(r => {
        console.log(`===consultarTiposContingencia===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarTiposMercaderia({ authRequest });
    })
        .then(r => {
        console.log(`===consultarTiposMercaderia===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarUnidadesVenta({ authRequest });
    })
        .then(r => {
        console.log(`===consultarUnidadesVenta===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarPaises({ authRequest });
    })
        .then(r => {
        console.log(`===consultarPaises===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarAduanas({
            token: authRequest.token,
            sign: authRequest.sign,
            cuitRepresentada: authRequest.cuitRepresentada
        });
    })
        .then(r => {
        console.log(`===consultarAduanas===\n${JSON.stringify(r)}`);
        return remHarinaService.consultarProvincias({ authRequest });
    })
        .then(r => {
        console.log(`===consultarAduanas===\n${JSON.stringify(r)}`);
    });
})
    .then(() => {
    console.log("=== FIN ===");
})
    .catch(err => {
    console.log("=== ERROR ===");
    console.error(err);
});
